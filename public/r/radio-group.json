{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "radio-group",
  "title": "Radio Group",
  "description": "Animated radio group with proximity hover, spring-animated selection dot, and optional Radix UI integration. Supports both controlled index and value-based APIs.",
  "dependencies": [
    "framer-motion",
    "@radix-ui/react-radio-group"
  ],
  "registryDependencies": [
    "utils",
    "springs",
    "font-weight",
    "shape-context",
    "use-proximity-hover"
  ],
  "files": [
    {
      "path": "registry/default/radio-group.tsx",
      "content": "\"use client\";\n\nimport {\n  useRef,\n  useState,\n  useEffect,\n  createContext,\n  useContext,\n  forwardRef,\n  type ReactNode,\n  type HTMLAttributes,\n} from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\";\nimport { cn } from \"@/lib/utils\";\nimport { springs } from \"@/lib/springs\";\nimport { fontWeights } from \"@/lib/font-weight\";\nimport { useProximityHover } from \"@/hooks/use-proximity-hover\";\nimport { useShape } from \"@/lib/shape-context\";\n\ninterface RadioGroupContextValue {\n  registerItem: (index: number, element: HTMLElement | null) => void;\n  activeIndex: number | null;\n}\n\nconst RadioGroupContext = createContext<RadioGroupContextValue | null>(null);\n\nfunction useRadioGroupContext() {\n  const ctx = useContext(RadioGroupContext);\n  if (!ctx) throw new Error(\"useRadioGroup must be used within a RadioGroup\");\n  return ctx;\n}\n\ninterface RadioGroupProps extends Omit<HTMLAttributes<HTMLDivElement>, \"onSelect\"> {\n  children: ReactNode;\n  selectedIndex: number;\n  value?: string;\n  onValueChange?: (value: string) => void;\n}\n\nconst RadioGroup = forwardRef<HTMLDivElement, RadioGroupProps>(\n  ({ children, selectedIndex, value, onValueChange, className, ...props }, ref) => {\n    const containerRef = useRef<HTMLDivElement>(null);\n    const {\n      activeIndex,\n      setActiveIndex,\n      itemRects,\n      sessionRef,\n      handlers,\n      registerItem,\n      measureItems,\n    } = useProximityHover(containerRef);\n\n    useEffect(() => {\n      measureItems();\n    }, [measureItems, children]);\n\n    const [focusedIndex, setFocusedIndex] = useState<number | null>(null);\n\n    const activeRect = activeIndex !== null ? itemRects[activeIndex] : null;\n    const focusRect = focusedIndex !== null ? itemRects[focusedIndex] : null;\n    const selectedRect = itemRects[selectedIndex];\n    const isHoveringOther =\n      activeIndex !== null && activeIndex !== selectedIndex;\n    const shape = useShape();\n\n    const content = (\n      <div\n        ref={(node) => {\n          (containerRef as React.MutableRefObject<HTMLDivElement | null>).current = node;\n          if (typeof ref === \"function\") ref(node);\n          else if (ref) (ref as React.MutableRefObject<HTMLDivElement | null>).current = node;\n        }}\n        onMouseEnter={handlers.onMouseEnter}\n        onMouseMove={handlers.onMouseMove}\n        onMouseLeave={handlers.onMouseLeave}\n        onFocus={(e) => {\n          const indexAttr = (e.target as HTMLElement)\n            .closest(\"[data-proximity-index]\")\n            ?.getAttribute(\"data-proximity-index\");\n          if (indexAttr != null) {\n            const idx = Number(indexAttr);\n            setActiveIndex(idx);\n            setFocusedIndex(\n              (e.target as HTMLElement).matches(\":focus-visible\") ? idx : null\n            );\n          }\n        }}\n        onBlur={(e) => {\n          if (containerRef.current?.contains(e.relatedTarget as Node)) return;\n          setFocusedIndex(null);\n          setActiveIndex(null);\n        }}\n        onKeyDown={(e) => {\n          const items = Array.from(\n            containerRef.current?.querySelectorAll('[role=\"radio\"]') ?? []\n          ) as HTMLElement[];\n          const currentIdx = items.indexOf(e.target as HTMLElement);\n          if (currentIdx === -1) return;\n\n          if ([\"ArrowDown\", \"ArrowUp\", \"ArrowRight\", \"ArrowLeft\"].includes(e.key)) {\n            e.preventDefault();\n            const next = [\"ArrowDown\", \"ArrowRight\"].includes(e.key)\n              ? (currentIdx + 1) % items.length\n              : (currentIdx - 1 + items.length) % items.length;\n            items[next].focus();\n            items[next].click();\n          } else if (e.key === \"Home\") {\n            e.preventDefault();\n            items[0]?.focus();\n            items[0]?.click();\n          } else if (e.key === \"End\") {\n            e.preventDefault();\n            items[items.length - 1]?.focus();\n            items[items.length - 1]?.click();\n          }\n        }}\n        role=\"radiogroup\"\n        className={cn(\n          \"relative flex flex-col gap-0.5 w-72 max-w-full select-none\",\n          className\n        )}\n        {...props}\n      >\n        {/* Selected background */}\n        {selectedRect && (\n          <motion.div\n            className={`absolute ${shape.bg} bg-selected/50 dark:bg-accent/40 pointer-events-none`}\n            initial={false}\n            animate={{\n              top: selectedRect.top,\n              left: selectedRect.left,\n              width: selectedRect.width,\n              height: selectedRect.height,\n              opacity: isHoveringOther ? 0.8 : 1,\n            }}\n            transition={{\n              ...springs.moderate,\n              opacity: { duration: 0.16 },\n            }}\n          />\n        )}\n\n        {/* Hover background */}\n        <AnimatePresence>\n          {activeRect && (\n            <motion.div\n              key={sessionRef.current}\n              className={`absolute ${shape.bg} bg-accent/40 dark:bg-accent/25 pointer-events-none`}\n              initial={{\n                opacity: 0,\n                top: activeRect.top,\n                left: activeRect.left,\n                width: activeRect.width,\n                height: activeRect.height,\n              }}\n              animate={{\n                opacity: 1,\n                top: activeRect.top,\n                left: activeRect.left,\n                width: activeRect.width,\n                height: activeRect.height,\n              }}\n              exit={{ opacity: 0, transition: { duration: 0.12 } }}\n              transition={{\n                ...springs.moderate,\n                opacity: { duration: 0.16 },\n              }}\n            />\n          )}\n        </AnimatePresence>\n\n        {/* Focus ring */}\n        <AnimatePresence>\n          {focusRect && (\n            <motion.div\n              className={`absolute ${shape.focusRing} pointer-events-none z-20 border border-[#6B97FF]`}\n              initial={false}\n              animate={{\n                left: focusRect.left - 2,\n                top: focusRect.top - 2,\n                width: focusRect.width + 4,\n                height: focusRect.height + 4,\n              }}\n              exit={{ opacity: 0, transition: { duration: 0.12 } }}\n              transition={{\n                ...springs.moderate,\n                opacity: { duration: 0.16 },\n              }}\n            />\n          )}\n        </AnimatePresence>\n\n        {children}\n      </div>\n    );\n\n    // If Radix value/onValueChange provided, wrap with Radix RadioGroup\n    if (value !== undefined && onValueChange) {\n      return (\n        <RadioGroupContext.Provider value={{ registerItem, activeIndex }}>\n          <RadioGroupPrimitive.Root\n            value={value}\n            onValueChange={onValueChange}\n            asChild\n          >\n            {content}\n          </RadioGroupPrimitive.Root>\n        </RadioGroupContext.Provider>\n      );\n    }\n\n    return (\n      <RadioGroupContext.Provider value={{ registerItem, activeIndex }}>\n        {content}\n      </RadioGroupContext.Provider>\n    );\n  }\n);\n\nRadioGroup.displayName = \"RadioGroup\";\n\ninterface RadioItemProps extends HTMLAttributes<HTMLDivElement> {\n  label: string;\n  index: number;\n  selected: boolean;\n  onSelect: () => void;\n  value?: string;\n}\n\nconst RadioItem = forwardRef<HTMLDivElement, RadioItemProps>(\n  ({ label, index, selected, onSelect, value, className, ...props }, ref) => {\n    const internalRef = useRef<HTMLDivElement>(null);\n    const hasMounted = useRef(false);\n    const { registerItem, activeIndex } = useRadioGroupContext();\n\n    useEffect(() => {\n      registerItem(index, internalRef.current);\n      return () => registerItem(index, null);\n    }, [index, registerItem]);\n\n    useEffect(() => {\n      hasMounted.current = true;\n    }, []);\n\n    const isActive = activeIndex === index;\n    const skipAnimation = !hasMounted.current;\n    const shape = useShape();\n\n    return (\n      <div\n        ref={(node) => {\n          (internalRef as React.MutableRefObject<HTMLDivElement | null>).current = node;\n          if (typeof ref === \"function\") ref(node);\n          else if (ref) (ref as React.MutableRefObject<HTMLDivElement | null>).current = node;\n        }}\n        data-proximity-index={index}\n        tabIndex={selected ? 0 : -1}\n        role=\"radio\"\n        aria-checked={selected}\n        aria-label={label}\n        onClick={onSelect}\n        onKeyDown={(e) => {\n          if (e.key === \" \" || e.key === \"Enter\") {\n            e.preventDefault();\n            onSelect();\n          }\n        }}\n        className={cn(\n          `relative z-10 flex items-center gap-2.5 ${shape.item} px-3 py-2 cursor-pointer outline-none`,\n          className\n        )}\n        {...props}\n      >\n        {/* Radio circle */}\n        <div className=\"relative w-[18px] h-[18px] shrink-0\">\n          {/* Border */}\n          <div\n            className={cn(\n              \"absolute inset-0 rounded-full border-solid transition-all duration-80\",\n              selected\n                ? \"border-[1.5px] border-transparent\"\n                : isActive\n                ? \"border-[1.5px] border-neutral-400 dark:border-neutral-500\"\n                : \"border-[1.5px] border-border\"\n            )}\n          />\n          {/* Dot */}\n          <AnimatePresence>\n            {selected && (\n              <motion.div\n                className=\"absolute inset-0 flex items-center justify-center\"\n                initial={{\n                  opacity: skipAnimation ? 1 : 0,\n                  scale: skipAnimation ? 1 : 0.3,\n                }}\n                animate={{ opacity: 1, scale: 1 }}\n                exit={{ opacity: 0, scale: 0.3, transition: { duration: 0.04 } }}\n                transition={springs.fast}\n              >\n                <div className=\"w-[8px] h-[8px] rounded-full bg-foreground\" />\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n\n        {/* Label */}\n        <span className=\"inline-grid text-[13px]\">\n          <span\n            className=\"col-start-1 row-start-1 invisible\"\n            style={{ fontVariationSettings: fontWeights.semibold }}\n            aria-hidden=\"true\"\n          >\n            {label}\n          </span>\n          <span\n            className={cn(\n              \"col-start-1 row-start-1 transition-[color,font-variation-settings] duration-80\",\n              selected || isActive\n                ? \"text-foreground\"\n                : \"text-muted-foreground\"\n            )}\n            style={{\n              fontVariationSettings: selected\n                ? fontWeights.semibold\n                : fontWeights.normal,\n            }}\n          >\n            {label}\n          </span>\n        </span>\n\n        {/* Hidden Radix radio input for accessibility */}\n        {value !== undefined && (\n          <RadioGroupPrimitive.Item\n            value={value}\n            className=\"sr-only\"\n            tabIndex={-1}\n            aria-hidden\n          />\n        )}\n      </div>\n    );\n  }\n);\n\nRadioItem.displayName = \"RadioItem\";\n\nexport { RadioGroup, RadioItem };\nexport default RadioGroup;\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}