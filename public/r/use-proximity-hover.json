{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-proximity-hover",
  "title": "useProximityHover",
  "description": "React hook for proximity-based hover detection. Tracks the closest item to the mouse cursor within a container, enabling smooth animated background indicators.",
  "files": [
    {
      "path": "registry/default/hooks/use-proximity-hover.ts",
      "content": "\"use client\";\n\nimport { useRef, useState, useCallback, useEffect, type RefObject } from \"react\";\n\nexport interface ItemRect {\n  top: number;\n  height: number;\n  left: number;\n  width: number;\n}\n\ninterface UseProximityHoverOptions {\n  axis?: \"x\" | \"y\";\n}\n\ninterface UseProximityHoverReturn {\n  activeIndex: number | null;\n  setActiveIndex: (index: number | null) => void;\n  itemRects: ItemRect[];\n  sessionRef: RefObject<number>;\n  handlers: {\n    onMouseMove: (e: React.MouseEvent) => void;\n    onMouseEnter: () => void;\n    onMouseLeave: () => void;\n  };\n  registerItem: (index: number, element: HTMLElement | null) => void;\n  measureItems: () => void;\n}\n\nexport function useProximityHover<T extends HTMLElement>(\n  containerRef: RefObject<T | null>,\n  options: UseProximityHoverOptions = {}\n): UseProximityHoverReturn {\n  const { axis = \"y\" } = options;\n  const itemsRef = useRef(new Map<number, HTMLElement>());\n  const [activeIndex, setActiveIndex] = useState<number | null>(null);\n  const [itemRects, setItemRects] = useState<ItemRect[]>([]);\n  const sessionRef = useRef(0);\n\n  const registerItem = useCallback(\n    (index: number, element: HTMLElement | null) => {\n      if (element) {\n        itemsRef.current.set(index, element);\n      } else {\n        itemsRef.current.delete(index);\n      }\n    },\n    []\n  );\n\n  const measureItems = useCallback(() => {\n    const container = containerRef.current;\n    if (!container) return;\n    const containerRect = container.getBoundingClientRect();\n    const scrollLeft = container.scrollLeft;\n    const borderTop = container.clientTop;\n    const borderLeft = container.clientLeft;\n    const rects: ItemRect[] = [];\n    itemsRef.current.forEach((element, index) => {\n      const rect = element.getBoundingClientRect();\n      rects[index] = {\n        top: rect.top - containerRect.top - borderTop,\n        height: rect.height,\n        left: rect.left - containerRect.left + scrollLeft - borderLeft,\n        width: rect.width,\n      };\n    });\n    setItemRects(rects);\n  }, [containerRef]);\n\n  const handleMouseMove = useCallback(\n    (e: React.MouseEvent) => {\n      const container = containerRef.current;\n      if (!container) return;\n\n      const containerRect = container.getBoundingClientRect();\n      const scrollLeft = container.scrollLeft;\n      const borderTop = container.clientTop;\n      const borderLeft = container.clientLeft;\n      const mousePos = axis === \"x\" ? e.clientX : e.clientY;\n\n      let closestIndex: number | null = null;\n      let closestDistance = Infinity;\n      const rects: ItemRect[] = [];\n\n      itemsRef.current.forEach((element, index) => {\n        const rect = element.getBoundingClientRect();\n        rects[index] = {\n          top: rect.top - containerRect.top - borderTop,\n          height: rect.height,\n          left: rect.left - containerRect.left + scrollLeft - borderLeft,\n          width: rect.width,\n        };\n\n        const itemCenter =\n          axis === \"x\"\n            ? rect.left + rect.width / 2\n            : rect.top + rect.height / 2;\n        const distance = Math.abs(mousePos - itemCenter);\n\n        if (distance < closestDistance) {\n          closestDistance = distance;\n          closestIndex = index;\n        }\n      });\n\n      setItemRects(rects);\n      setActiveIndex(closestIndex);\n    },\n    [axis, containerRef]\n  );\n\n  const handleMouseEnter = useCallback(() => {\n    sessionRef.current += 1;\n  }, []);\n\n  const handleMouseLeave = useCallback(() => {\n    setActiveIndex(null);\n  }, []);\n\n  return {\n    activeIndex,\n    setActiveIndex,\n    itemRects,\n    sessionRef,\n    handlers: {\n      onMouseMove: handleMouseMove,\n      onMouseEnter: handleMouseEnter,\n      onMouseLeave: handleMouseLeave,\n    },\n    registerItem,\n    measureItems,\n  };\n}\n\n/**\n * Hook for child items to register themselves with the proximity hover system.\n * Call in useEffect with the item's ref and index.\n */\nexport function useRegisterProximityItem(\n  registerItem: (index: number, element: HTMLElement | null) => void,\n  index: number,\n  ref: RefObject<HTMLElement | null>\n) {\n  useEffect(() => {\n    registerItem(index, ref.current);\n    return () => registerItem(index, null);\n  }, [index, registerItem, ref]);\n}\n",
      "type": "registry:hook"
    }
  ],
  "type": "registry:hook"
}