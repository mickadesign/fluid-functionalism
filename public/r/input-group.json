{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "input-group",
  "title": "Input Group",
  "description": "Grouped input fields with proximity-based highlighting, animated label transitions, optional icons, and error states.",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "utils",
    "font-weight",
    "shape-context"
  ],
  "files": [
    {
      "path": "registry/default/input-group.tsx",
      "content": "\"use client\";\n\nimport {\n  useRef,\n  useState,\n  useCallback,\n  useEffect,\n  createContext,\n  useContext,\n  forwardRef,\n  type ReactNode,\n  type HTMLAttributes,\n  type InputHTMLAttributes,\n} from \"react\";\nimport type { LucideIcon } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { fontWeights } from \"@/lib/font-weight\";\nimport { useShape } from \"@/lib/shape-context\";\n\ninterface InputGroupContextValue {\n  registerItem: (index: number, element: HTMLLabelElement | null) => void;\n  activeIndex: number | null;\n  focusedIndex: number | null;\n  setFocusedIndex: (index: number | null) => void;\n}\n\nconst InputGroupContext = createContext<InputGroupContextValue | null>(null);\n\nfunction useInputGroup() {\n  const ctx = useContext(InputGroupContext);\n  if (!ctx)\n    throw new Error(\"useInputGroup must be used within an InputGroup\");\n  return ctx;\n}\n\ninterface InputGroupProps extends HTMLAttributes<HTMLDivElement> {\n  children: ReactNode;\n}\n\nconst InputGroup = forwardRef<HTMLDivElement, InputGroupProps>(\n  ({ children, className, ...props }, ref) => {\n    const containerRef = useRef<HTMLDivElement>(null);\n    const itemsRef = useRef(new Map<number, HTMLLabelElement>());\n    const [activeIndex, setActiveIndex] = useState<number | null>(null);\n    const [focusedIndex, setFocusedIndex] = useState<number | null>(null);\n\n    const registerItem = useCallback(\n      (index: number, element: HTMLLabelElement | null) => {\n        if (element) {\n          itemsRef.current.set(index, element);\n        } else {\n          itemsRef.current.delete(index);\n        }\n      },\n      []\n    );\n\n    const handleMouseMove = useCallback((e: React.MouseEvent) => {\n      const mouseY = e.clientY;\n\n      let closestIndex: number | null = null;\n      let closestDistance = Infinity;\n\n      itemsRef.current.forEach((element, index) => {\n        const rect = element.getBoundingClientRect();\n        const itemCenterY = rect.top + rect.height / 2;\n        const distance = Math.abs(mouseY - itemCenterY);\n\n        if (distance < closestDistance) {\n          closestDistance = distance;\n          closestIndex = index;\n        }\n      });\n\n      setActiveIndex(closestIndex);\n    }, []);\n\n    const handleMouseLeave = useCallback(() => {\n      setActiveIndex(null);\n    }, []);\n\n    return (\n      <InputGroupContext.Provider\n        value={{ registerItem, activeIndex, focusedIndex, setFocusedIndex }}\n      >\n        <div\n          ref={(node) => {\n            (containerRef as React.MutableRefObject<HTMLDivElement | null>).current = node;\n            if (typeof ref === \"function\") ref(node);\n            else if (ref) (ref as React.MutableRefObject<HTMLDivElement | null>).current = node;\n          }}\n          onMouseMove={handleMouseMove}\n          onMouseLeave={handleMouseLeave}\n          className={cn(\"flex flex-col gap-3 w-72 max-w-full\", className)}\n          {...props}\n        >\n          {children}\n        </div>\n      </InputGroupContext.Provider>\n    );\n  }\n);\n\nInputGroup.displayName = \"InputGroup\";\n\ninterface InputFieldProps\n  extends Omit<InputHTMLAttributes<HTMLInputElement>, \"onChange\" | \"index\"> {\n  label: string;\n  placeholder?: string;\n  icon?: LucideIcon;\n  index: number;\n  value: string;\n  onChange: (value: string) => void;\n  error?: string;\n  disabled?: boolean;\n  className?: string;\n}\n\nconst InputField = forwardRef<HTMLLabelElement, InputFieldProps>(\n  (\n    {\n      label,\n      placeholder,\n      icon: Icon,\n      index,\n      value,\n      onChange,\n      error,\n      disabled,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const internalRef = useRef<HTMLLabelElement>(null);\n    const { registerItem, activeIndex, setFocusedIndex } =\n      useInputGroup();\n    const [isFocused, setIsFocused] = useState(false);\n    const shape = useShape();\n\n    useEffect(() => {\n      registerItem(index, internalRef.current);\n      return () => registerItem(index, null);\n    }, [index, registerItem]);\n\n    const isActive = activeIndex === index;\n    const labelActive = isActive || isFocused;\n\n    const errorId = error ? `input-error-${index}` : undefined;\n\n    const handleFocus = () => {\n      setIsFocused(true);\n      setFocusedIndex(index);\n    };\n\n    const handleBlur = () => {\n      setIsFocused(false);\n      setFocusedIndex(null);\n    };\n\n    // Input container classes\n    let bgClass: string;\n    let ringClass: string;\n\n    if (disabled) {\n      bgClass = \"bg-transparent\";\n      ringClass = \"ring-border\";\n    } else if (error) {\n      bgClass = isFocused\n        ? \"bg-card\"\n        : \"bg-destructive-light/60\";\n      ringClass = \"ring-destructive/50\";\n    } else if (isFocused) {\n      bgClass = \"bg-card\";\n      ringClass = \"ring-border\";\n    } else if (isActive) {\n      bgClass = \"bg-muted/50\";\n      ringClass = \"ring-border\";\n    } else {\n      bgClass = \"bg-transparent\";\n      ringClass = \"ring-transparent\";\n    }\n\n    return (\n      <label\n        ref={(node) => {\n          (internalRef as React.MutableRefObject<HTMLLabelElement | null>).current = node;\n          if (typeof ref === \"function\") ref(node);\n          else if (ref) (ref as React.MutableRefObject<HTMLLabelElement | null>).current = node;\n        }}\n        className={cn(\n          \"flex flex-col gap-1 cursor-text\",\n          disabled && \"opacity-50 pointer-events-none\",\n          className\n        )}\n      >\n        {/* Label */}\n        <span className=\"inline-grid text-[13px] pl-3\">\n          <span\n            className=\"col-start-1 row-start-1 invisible\"\n            style={{ fontVariationSettings: fontWeights.semibold }}\n            aria-hidden=\"true\"\n          >\n            {label}\n          </span>\n          <span\n            className={cn(\n              \"col-start-1 row-start-1\",\n              error\n                ? \"text-destructive\"\n                : \"text-muted-foreground\"\n            )}\n            style={{\n              fontVariationSettings: fontWeights.normal,\n            }}\n          >\n            {label}\n          </span>\n        </span>\n\n        {/* Input container */}\n        <div\n          className={cn(\n            `flex items-center gap-2 ${shape.input} px-3 py-2 ring-1 transition-all duration-80`,\n            bgClass,\n            ringClass\n          )}\n        >\n          {Icon && (\n            <Icon\n              size={16}\n              strokeWidth={labelActive ? 2 : 1.5}\n              className={cn(\n                \"shrink-0 transition-[color,stroke-width] duration-80\",\n                error\n                  ? \"text-destructive\"\n                  : labelActive\n                  ? \"text-foreground\"\n                  : \"text-muted-foreground\"\n              )}\n            />\n          )}\n          <input\n            type=\"text\"\n            value={value}\n            onChange={(e) => onChange(e.target.value)}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            placeholder={placeholder}\n            disabled={disabled}\n            aria-invalid={!!error || undefined}\n            aria-describedby={errorId}\n            className=\"w-full bg-transparent text-[13px] text-foreground placeholder:text-muted-foreground outline-none font-[inherit]\"\n            style={{ fontVariationSettings: fontWeights.normal }}\n            {...props}\n          />\n        </div>\n\n        {/* Error message */}\n        {error && (\n          <span\n            id={errorId}\n            className=\"text-[12px] text-destructive pl-3\"\n            style={{ fontVariationSettings: fontWeights.medium }}\n          >\n            {error}\n          </span>\n        )}\n      </label>\n    );\n  }\n);\n\nInputField.displayName = \"InputField\";\n\nexport { InputGroup, InputField };\nexport default InputGroup;\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}